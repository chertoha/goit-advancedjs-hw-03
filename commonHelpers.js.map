{"version":3,"file":"commonHelpers.js","sources":["../src/js/config.js","../src/js/cat-api.js","../src/js/info.js","../src/js/toast.js","../src/js/breed.js"],"sourcesContent":["import axios from 'axios';\n\nexport const ROUTES = {\n  BREEDS: '/breeds',\n  SEARCH: '/images/search',\n};\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_TXJqDJeRS9JivKq3zq7sv4yzdOKp1ER7wIZK3ZAVZcB7rVqgE85DUoqQnpfQg9LB';\n\nexport const api = axios.create({\n  baseURL: 'https://api.thecatapi.com/v1',\n});\n","import { api, ROUTES } from './config';\n\nexport const fetchBreeds = () => {\n  return api.get(ROUTES.BREEDS).then(response => {\n    return response.data;\n  });\n};\n\nexport const fetchCatByBreed = breedId => {\n  return api\n    .get(ROUTES.SEARCH, { params: { breed_ids: breedId } })\n    .then(response => {\n      return response.data;\n    });\n};\n","export const createInfoData = (imgUrl, title, description, options) => {\n  const fragment = document.createDocumentFragment();\n  const image = document.createElement('img');\n  const meta = document.createElement('div');\n  const header = document.createElement('h1');\n  const text = document.createElement('p');\n  const footer = document.createElement('p');\n\n  image.src = imgUrl;\n\n  header.innerText = title;\n  text.innerText = description;\n  footer.innerHTML = `<strong>Temperament</strong>: ${options}`;\n\n  meta.append(header, text, footer);\n  fragment.append(image, meta);\n  return fragment;\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  id: '11',\n  closeOnClick: true,\n  position: 'topRight',\n  progressBar: false,\n  timeout: false,\n  transitionIn: 'bounceInUp',\n});\n\nexport const toastError = () => {\n  iziToast.error({\n    title: 'Error!',\n    message: 'Oops! Something went wrong! Try reloading the page!',\n  });\n};\n","import SlimSelect from 'slim-select';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport { createInfoData } from './info';\nimport { toastError } from './toast';\n\nconst PLACEHOLDER_VALUE = 'Choose breed';\n\nconst select = document.querySelector('.breed-select');\nconst info = document.querySelector('.cat-info');\nconst loader = document.querySelector('.loader');\n\nconst slimSelect = new SlimSelect({\n  select: select,\n});\n\nloading(true);\nshowSelect(false);\n\nfetchBreeds()\n  .then(breeds => {\n    populateSelect(breeds);\n    showSelect(true);\n  })\n  .catch(() => {\n    toastError();\n  })\n  .finally(() => {\n    loading(false);\n  });\n\nselect.addEventListener('change', e => {\n  const breedId = e.target.value;\n\n  if (breedId === PLACEHOLDER_VALUE) return;\n\n  loading(true);\n  showInfo(false);\n\n  fetchCatByBreed(breedId)\n    .then(data => {\n      populateInfo(data[0]);\n      showInfo(true);\n    })\n    .catch(() => {\n      toastError();\n    })\n    .finally(() => {\n      loading(false);\n    });\n});\n\n// ----------------------- Helpers\nfunction populateSelect(breeds) {\n  const data = breeds.map(({ id, name }) => ({ text: name, value: id }));\n  slimSelect.setData([{ placeholder: true, text: PLACEHOLDER_VALUE }, ...data]);\n}\n\nfunction populateInfo(data) {\n  if (!data) {\n    throw new Error();\n  }\n  const breedUrl = data.url;\n  const { name, description, temperament } = data.breeds[0];\n\n  const fragment = createInfoData(breedUrl, name, description, temperament);\n  info.innerHTML = '';\n  info.appendChild(fragment);\n}\n\nfunction loading(isLoading) {\n  loader.classList.toggle('hidden', !isLoading);\n}\n\nfunction showSelect(isVisible) {\n  select.classList.toggle('hidden', !isVisible);\n}\n\nfunction showInfo(isVisible) {\n  info.classList.toggle('hidden', !isVisible);\n}\n"],"names":["ROUTES","axios","api","fetchBreeds","response","fetchCatByBreed","breedId","createInfoData","imgUrl","title","description","options","fragment","image","meta","header","text","footer","iziToast","toastError","PLACEHOLDER_VALUE","select","info","loader","slimSelect","SlimSelect","loading","showSelect","breeds","populateSelect","showInfo","data","populateInfo","id","name","breedUrl","temperament","isLoading","isVisible"],"mappings":"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"}