{"version":3,"file":"commonHelpers.js","sources":["../src/js/config.js","../src/js/cat-api.js","../src/js/info.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nexport const ROUTES = {\n  BREEDS: '/breeds',\n  SEARCH: '/images/search',\n};\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_TXJqDJeRS9JivKq3zq7sv4yzdOKp1ER7wIZK3ZAVZcB7rVqgE85DUoqQnpfQg9LB';\n\nexport const api = axios.create({\n  baseURL: 'https://api.thecatapi.com/v1',\n});\n","import { api, ROUTES } from './config';\n\nexport const fetchBreeds = () => {\n  return api.get(ROUTES.BREEDS).then(response => {\n    return response.data;\n  });\n};\n\nexport const fetchCatByBreed = breedId => {\n  return api\n    .get(ROUTES.SEARCH, { params: { breed_ids: breedId } })\n    .then(response => {\n      return response.data;\n    });\n};\n","export const createInfoData = (imgUrl, title, description, options) => {\n  const fragment = document.createDocumentFragment();\n  const image = document.createElement('img');\n  const meta = document.createElement('div');\n  const header = document.createElement('h1');\n  const text = document.createElement('p');\n  const footer = document.createElement('p');\n\n  image.src = imgUrl;\n\n  header.innerText = title;\n  text.innerText = description;\n  footer.innerHTML = `<strong>Temperament</strong>: ${options}`;\n\n  meta.append(header, text, footer);\n  fragment.append(image, meta);\n  return fragment;\n};\n","import { fetchBreeds, fetchCatByBreed } from './js/cat-api';\nimport { createInfoData } from './js/info';\n\nconst select = document.querySelector('.breed-select');\nconst info = document.querySelector('.cat-info');\nconst loader = document.querySelector('.loader');\nconst error = document.querySelector('.error');\n\nloading(true);\nshowSelect(false);\nshowError(false);\n\nfetchBreeds()\n  .then(breeds => {\n    populateSelect(breeds);\n    showSelect(true);\n  })\n  .catch(() => {\n    showError(true);\n  })\n  .finally(() => {\n    loading(false);\n  });\n\nselect.addEventListener('change', e => {\n  const breedId = e.target.value;\n\n  fetchCatByBreed(breedId)\n    .then(data => {\n      populateInfo(data[0]);\n    })\n    .catch(() => {\n      showError(true);\n    });\n});\n\n// ----------------------- Helpers\nfunction populateSelect(breeds) {\n  const disabledOption = `<option value=\"\" selected disabled hidden>-- Choose breed --</option>`;\n  const optionsMarkup = breeds\n    .map(({ id, name }) => `<option value=\"${id}\">${name}</option>`)\n    .join('');\n  select.insertAdjacentHTML('afterbegin', disabledOption + optionsMarkup);\n}\n\nfunction populateInfo(data) {\n  if (!data) {\n    throw new Error();\n  }\n  const breedUrl = data.url;\n  const { name, description, temperament } = data.breeds[0];\n\n  const fragment = createInfoData(breedUrl, name, description, temperament);\n  info.innerHTML = '';\n  info.appendChild(fragment);\n}\n\nfunction loading(isLoading) {\n  loader.style.display = isLoading ? 'block' : 'none';\n}\n\nfunction showSelect(isVisible) {\n  select.style.display = isVisible ? 'block' : 'none';\n}\n\nfunction showError(isError) {\n  error.style.display = isError ? 'block' : 'none';\n}\n"],"names":["ROUTES","axios","api","fetchBreeds","response","fetchCatByBreed","breedId","createInfoData","imgUrl","title","description","options","fragment","image","meta","header","text","footer","select","info","loader","error","loading","showSelect","showError","breeds","populateSelect","data","populateInfo","disabledOption","optionsMarkup","id","name","breedUrl","temperament","isLoading","isVisible","isError"],"mappings":"svBAEO,MAAMA,EAAS,CACpB,OAAQ,UACR,OAAQ,gBACV,EAEAC,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEK,MAAMC,EAAMD,EAAM,OAAO,CAC9B,QAAS,8BACX,CAAC,ECVYE,EAAc,IAClBD,EAAI,IAAIF,EAAO,MAAM,EAAE,KAAKI,GAC1BA,EAAS,IACjB,EAGUC,EAAkBC,GACtBJ,EACJ,IAAIF,EAAO,OAAQ,CAAE,OAAQ,CAAE,UAAWM,CAAO,EAAI,EACrD,KAAKF,GACGA,EAAS,IACjB,ECbQG,EAAiB,CAACC,EAAQC,EAAOC,EAAaC,IAAY,CACrE,MAAMC,EAAW,SAAS,yBACpBC,EAAQ,SAAS,cAAc,KAAK,EACpCC,EAAO,SAAS,cAAc,KAAK,EACnCC,EAAS,SAAS,cAAc,IAAI,EACpCC,EAAO,SAAS,cAAc,GAAG,EACjCC,EAAS,SAAS,cAAc,GAAG,EAEzC,OAAAJ,EAAM,IAAML,EAEZO,EAAO,UAAYN,EACnBO,EAAK,UAAYN,EACjBO,EAAO,UAAY,iCAAiCN,IAEpDG,EAAK,OAAOC,EAAQC,EAAMC,CAAM,EAChCL,EAAS,OAAOC,EAAOC,CAAI,EACpBF,CACT,ECdMM,EAAS,SAAS,cAAc,eAAe,EAC/CC,EAAO,SAAS,cAAc,WAAW,EACzCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,SAAS,cAAc,QAAQ,EAE7CC,EAAQ,EAAI,EACZC,EAAW,EAAK,EAChBC,EAAU,EAAK,EAEfrB,EAAa,EACV,KAAKsB,GAAU,CACdC,EAAeD,CAAM,EACrBF,EAAW,EAAI,CACnB,CAAG,EACA,MAAM,IAAM,CACXC,EAAU,EAAI,CAClB,CAAG,EACA,QAAQ,IAAM,CACbF,EAAQ,EAAK,CACjB,CAAG,EAEHJ,EAAO,iBAAiB,SAAU,GAAK,CACrC,MAAMZ,EAAU,EAAE,OAAO,MAEzBD,EAAgBC,CAAO,EACpB,KAAKqB,GAAQ,CACZC,EAAaD,EAAK,EAAE,CAC1B,CAAK,EACA,MAAM,IAAM,CACXH,EAAU,EAAI,CACpB,CAAK,CACL,CAAC,EAGD,SAASE,EAAeD,EAAQ,CAC9B,MAAMI,EAAiB,wEACjBC,EAAgBL,EACnB,IAAI,CAAC,CAAE,GAAAM,EAAI,KAAAC,KAAW,kBAAkBD,MAAOC,YAAe,EAC9D,KAAK,EAAE,EACVd,EAAO,mBAAmB,aAAcW,EAAiBC,CAAa,CACxE,CAEA,SAASF,EAAaD,EAAM,CAC1B,GAAI,CAACA,EACH,MAAM,IAAI,MAEZ,MAAMM,EAAWN,EAAK,IAChB,CAAE,KAAAK,EAAM,YAAAtB,EAAa,YAAAwB,CAAa,EAAGP,EAAK,OAAO,GAEjDf,EAAWL,EAAe0B,EAAUD,EAAMtB,EAAawB,CAAW,EACxEf,EAAK,UAAY,GACjBA,EAAK,YAAYP,CAAQ,CAC3B,CAEA,SAASU,EAAQa,EAAW,CAC1Bf,EAAO,MAAM,QAAUe,EAAY,QAAU,MAC/C,CAEA,SAASZ,EAAWa,EAAW,CAC7BlB,EAAO,MAAM,QAAUkB,EAAY,QAAU,MAC/C,CAEA,SAASZ,EAAUa,EAAS,CAC1BhB,EAAM,MAAM,QAAUgB,EAAU,QAAU,MAC5C"}